{
  "checksum": "b5ed3c5ca31abc10348b2e71e05e40d2f1e485fe42ef08a84cb805d986e14050",
  "crates": {
    "bit_field 0.10.1": {
      "name": "bit_field",
      "version": "0.10.1",
      "repository": {
        "Http": {
          "url": "https://crates.io/api/v1/crates/bit_field/0.10.1/download",
          "sha256": "dcb6dd1c2376d2e096796e234a70e17e94cc2d5d54ff8ce42b28cef1d0d359a4"
        }
      },
      "targets": [
        {
          "Library": {
            "crate_name": "bit_field",
            "crate_root": "src/lib.rs",
            "srcs": {
              "include": [
                "**/*.rs"
              ],
              "exclude": []
            }
          }
        }
      ],
      "library_target_name": "bit_field",
      "common_attrs": {
        "compile_data_glob": [
          "**"
        ],
        "edition": "2015",
        "version": "0.10.1"
      },
      "license": "Apache-2.0/MIT"
    },
    "bitflags 1.3.2": {
      "name": "bitflags",
      "version": "1.3.2",
      "repository": {
        "Http": {
          "url": "https://crates.io/api/v1/crates/bitflags/1.3.2/download",
          "sha256": "bef38d45163c2f1dde094a7dfd33ccf595c92905c8f8f4fdc18d06fb1037718a"
        }
      },
      "targets": [
        {
          "Library": {
            "crate_name": "bitflags",
            "crate_root": "src/lib.rs",
            "srcs": {
              "include": [
                "**/*.rs"
              ],
              "exclude": []
            }
          }
        }
      ],
      "library_target_name": "bitflags",
      "common_attrs": {
        "compile_data_glob": [
          "**"
        ],
        "crate_features": [
          "default"
        ],
        "edition": "2018",
        "version": "1.3.2"
      },
      "license": "MIT/Apache-2.0"
    },
    "bootloader 0.9.22": {
      "name": "bootloader",
      "version": "0.9.22",
      "repository": {
        "Http": {
          "url": "https://crates.io/api/v1/crates/bootloader/0.9.22/download",
          "sha256": "de78decc37247c7cfac5dbf3495c7298c6ac97cb355161caa7e15969c6648e6c",
          "patch_args": [
            "-p1"
          ],
          "patches": [
            "@//bazel/third_party:bootloader.patch"
          ]
        }
      },
      "targets": [
        {
          "Library": {
            "crate_name": "bootloader",
            "crate_root": "src/lib.rs",
            "srcs": {
              "include": [
                "**/*.rs"
              ],
              "exclude": []
            }
          }
        },
        {
          "Binary": {
            "crate_name": "bootloader",
            "crate_root": "src/main.rs",
            "srcs": {
              "include": [
                "**/*.rs"
              ],
              "exclude": []
            }
          }
        },
        {
          "BuildScript": {
            "crate_name": "build_script_build",
            "crate_root": "build.rs",
            "srcs": {
              "include": [
                "**/*.rs"
              ],
              "exclude": []
            }
          }
        }
      ],
      "library_target_name": "bootloader",
      "common_attrs": {
        "compile_data_glob": [
          "**"
        ],
        "crate_features": [
          "default"
        ],
        "deps": {
          "common": [
            {
              "id": "bootloader 0.9.22",
              "target": "build_script_build"
            }
          ],
          "selects": {}
        },
        "edition": "2018",
        "version": "0.9.22"
      },
      "build_script_attrs": {
        "data": {
          "common": [
            "@rust_linux_x86_64//:rustc"
          ],
          "selects": {}
        },
        "data_glob": [
          "**"
        ],
        "build_script_env": {
          "common": {
            "PATH": "$$(dirname $(location @rust_linux_x86_64//:rustc)):$$PATH"
          },
          "selects": {}
        }
      },
      "license": "MIT/Apache-2.0",
      "additive_build_file_content": "# Copyright 2022 The Firefly Authors.\n#\n# Use of this source code is governed by a BSD 3-clause\n# license that can be found in the LICENSE file.\n\n# The bootloader package is a little unusual, as we use\n# both its library crate and main binary crate, plus we\n# depend on its build.rs script.\n#\n# The library crate is a standard rust_library.\n#\n# The build.rs script  produces a couple of output files\n# we need later on (a generated rust file containing the\n# kernel's configuration, plus a modified version of the\n# kernel binary). It's not currently possible to declare\n# or use output files with a cargo_build_script. Instead,\n# we build it as a rust_binary and then use a genrule to\n# invoke it, collecting its outputs in the process.\n#\n# Sadly, the build script produces not only an output\n# file (bootloader_config.rs) but also prints important\n# information to stdout (an extra search path for the\n# linker). Running the build script as a rust_binary + genrule\n# is necessary so we can declare the output file, but a\n# cargo_build_script is necessary to capture, parse, and\n# pass on the search path to the linker. That means we\n# have to do both. It would be great to be able to use\n# just one. We can capture the path to the extra link\n# entry, but can't extract its parent directory to pass\n# to the linker.\n#\n# The binary crate is built as a rust_binary, passing in\n# the outputs from the build script. This produces the\n# bootable image in the form of an ELF executable.\n#\n# Once we have the bootable image, we use the bootimage\n# crate to turn the ELF executable into a raw executable,\n# padded to the next smallest block size (512 bytes).\n\n# We already have the bootloader library, which is a normal\n# build.\n\n# Now, the multiple steps necessary to build\n# the bootloader binary.\n#\n# First, we compile the build script.\n\nrust_binary(\n    name = \"build_script\",\n    srcs = [\"build.rs\"],\n    crate_features = [\n        \"binary\",\n        \"fixedvec\",\n        \"llvm-tools\",\n        \"map_physical_memory\",\n        \"toml\",\n        \"usize_conversions\",\n        \"x86_64\",\n        \"xmas-elf\",\n    ],\n    crate_root = \"build.rs\",\n    edition = \"2021\",\n    visibility = [\"//visibility:private\"],\n    deps = [\n        \"@crates//:llvm-tools\",\n        \"@crates//:toml\",\n    ],\n)\n\n# Invoke the build script, passing\n# in the kernel binary and its\n# Cargo.toml.\n\ngenrule(\n    name = \"package_kernel\",\n    srcs = [\n        \"@//kernel:kernel\",\n        \"@//kernel:ograC.toml\",\n        \"@rust_linux_x86_64//:rustc\",\n        \"x86_64-bootloader.json\",\n    ],\n    outs = [\n        \"bootloader_config.rs\",\n        \"libkernel_bin-kernel.a\",\n    ],\n    cmd = \"\"\"\n        export TARGET=\"$(location x86_64-bootloader.json)\"\n        export KERNEL=\"$(location @//kernel:kernel)\"\n        export KERNEL_MANIFEST=\"$(location @//kernel:ograC.toml)\"\n        export OUT_DIR=\"$$(realpath $(@D))\"\n        export PATH=\"$$(dirname $(location @rust_linux_x86_64//:rustc)):$$PATH\"\n        $(location :build_script) > /dev/null\"\"\",\n    message = \"Packaging the kernel binary\",\n    tools = [\n        \":build_script\",\n    ],\n    visibility = [\"//visibility:private\"],\n)\n\n# Build the bootloader binary using the\n# information and files generated by the\n# build script above.\n#\n# Note, we don't invoke this target directly,\n# as it needs to be built for a custom\n# target configuration. Instead, we invoke\n# bootloader_bin_transition below.\n\nrust_binary(\n    name = \"bootloader_bin\",\n    srcs = glob([\"**/*.rs\"]),\n    compile_data = [\n        \":bootloader_config.rs\",\n        \":libkernel_bin-kernel.a\",\n    ],\n    crate_features = [\n        \"binary\",\n        \"default\",\n        \"map_physical_memory\",\n    ],\n    crate_root = \"src/main.rs\",\n    data = glob(\n        [\"**\"],\n        exclude = [\n            # These can be manually added with overrides if needed.\n\n            # If you run `cargo build` in this dir, the target dir can get very big very quick.\n            \"target/**\",\n\n            # These are not vendored from the crate - we exclude them to avoid busting caches\n            # when we change how we generate BUILD files and such.\n            \"BUILD.bazel\",\n            \"WORKSPACE.bazel\",\n            \"WORKSPACE\",\n        ],\n    ),\n    edition = \"2021\",\n    linker_script = \"linker.ld\",\n    rustc_env = {\n        # This should be OUT_DIR, but while we can get the\n        # path to bootloader_config.rs, we can't get the\n        # path to its parent directory. As a result, we use\n        # bootloader.patch to change how the file is included.\n        \"BOOTLOADER_CONFIG_RS\": \"$(location :bootloader_config.rs)\",\n    },\n    rustc_flags = [\n        \"--cap-lints=allow\",\n        \"-Cpanic=abort\",\n        \"-Clink-args=-nostartfiles -static -Wl,--gc-sections -Wl,--build-id=none\",\n        \"-Ctarget-feature=+crt-static\",\n        # :bootloader_build_script adds to the linker's search path\n        # but for some reason it doesn't add to the link list, so\n        # we do that manually here.\n        \"-lstatic=kernel_bin-kernel\",\n    ],\n    tags = [\"manual\"],\n    visibility = [\"//visibility:public\"],\n    deps = [\n        \":bootloader\",\n        \":bootloader_build_script\",\n        \"@crates//:bit_field\",\n        \"@crates//:fixedvec\",\n        \"@crates//:usize_conversions\",\n        \"@crates//:x86_64\",\n        \"@crates//:xmas-elf\",\n    ],\n)\n"
    },
    "byteorder 1.4.3": {
      "name": "byteorder",
      "version": "1.4.3",
      "repository": {
        "Http": {
          "url": "https://crates.io/api/v1/crates/byteorder/1.4.3/download",
          "sha256": "14c189c53d098945499cdfa7ecc63567cf3886b3332b312a5b4585d8d3a6a610"
        }
      },
      "targets": [
        {
          "Library": {
            "crate_name": "byteorder",
            "crate_root": "src/lib.rs",
            "srcs": {
              "include": [
                "**/*.rs"
              ],
              "exclude": []
            }
          }
        }
      ],
      "library_target_name": "byteorder",
      "common_attrs": {
        "compile_data_glob": [
          "**"
        ],
        "edition": "2018",
        "version": "1.4.3"
      },
      "license": "Unlicense OR MIT"
    },
    "direct-cargo-bazel-deps 0.0.1": {
      "name": "direct-cargo-bazel-deps",
      "version": "0.0.1",
      "repository": null,
      "targets": [
        {
          "Library": {
            "crate_name": "direct_cargo_bazel_deps",
            "crate_root": ".direct_cargo_bazel_deps.rs",
            "srcs": {
              "include": [
                "**/*.rs"
              ],
              "exclude": []
            }
          }
        }
      ],
      "library_target_name": "direct_cargo_bazel_deps",
      "common_attrs": {
        "compile_data_glob": [
          "**"
        ],
        "deps": {
          "common": [
            {
              "id": "bit_field 0.10.1",
              "target": "bit_field"
            },
            {
              "id": "bitflags 1.3.2",
              "target": "bitflags"
            },
            {
              "id": "bootloader 0.9.22",
              "target": "bootloader"
            },
            {
              "id": "fixedvec 0.2.4",
              "target": "fixedvec"
            },
            {
              "id": "lazy_static 1.4.0",
              "target": "lazy_static"
            },
            {
              "id": "linked_list_allocator 0.9.1",
              "target": "linked_list_allocator"
            },
            {
              "id": "llvm-tools 0.1.1",
              "target": "llvm_tools"
            },
            {
              "id": "managed 0.8.0",
              "target": "managed"
            },
            {
              "id": "pic8259 0.10.2",
              "target": "pic8259"
            },
            {
              "id": "raw-cpuid 10.3.0",
              "target": "raw_cpuid"
            },
            {
              "id": "smoltcp 0.8.0",
              "target": "smoltcp"
            },
            {
              "id": "toml 0.5.8",
              "target": "toml"
            },
            {
              "id": "uart_16550 0.2.17",
              "target": "uart_16550"
            },
            {
              "id": "usize_conversions 0.2.0",
              "target": "usize_conversions"
            },
            {
              "id": "x86_64 0.14.9",
              "target": "x86_64"
            },
            {
              "id": "xmas-elf 0.8.0",
              "target": "xmas_elf"
            }
          ],
          "selects": {}
        },
        "edition": "2018",
        "proc_macro_deps": {
          "common": [
            {
              "id": "hex-literal 0.3.4",
              "target": "hex_literal"
            }
          ],
          "selects": {}
        },
        "version": "0.0.1"
      },
      "license": null
    },
    "fixedvec 0.2.4": {
      "name": "fixedvec",
      "version": "0.2.4",
      "repository": {
        "Http": {
          "url": "https://crates.io/api/v1/crates/fixedvec/0.2.4/download",
          "sha256": "b395ef2adf62bdeefcd1b59ad0dd2225c6c333ec79656ea79ac5285c46d051ea"
        }
      },
      "targets": [
        {
          "Library": {
            "crate_name": "fixedvec",
            "crate_root": "src/lib.rs",
            "srcs": {
              "include": [
                "**/*.rs"
              ],
              "exclude": []
            }
          }
        }
      ],
      "library_target_name": "fixedvec",
      "common_attrs": {
        "compile_data_glob": [
          "**"
        ],
        "edition": "2015",
        "version": "0.2.4"
      },
      "license": "MIT"
    },
    "hex-literal 0.3.4": {
      "name": "hex-literal",
      "version": "0.3.4",
      "repository": {
        "Http": {
          "url": "https://crates.io/api/v1/crates/hex-literal/0.3.4/download",
          "sha256": "7ebdb29d2ea9ed0083cd8cece49bbd968021bd99b0849edb4a9a7ee0fdf6a4e0"
        }
      },
      "targets": [
        {
          "ProcMacro": {
            "crate_name": "hex_literal",
            "crate_root": "src/lib.rs",
            "srcs": {
              "include": [
                "**/*.rs"
              ],
              "exclude": []
            }
          }
        }
      ],
      "library_target_name": "hex_literal",
      "common_attrs": {
        "compile_data_glob": [
          "**"
        ],
        "edition": "2018",
        "version": "0.3.4"
      },
      "license": "MIT OR Apache-2.0"
    },
    "lazy_static 1.4.0": {
      "name": "lazy_static",
      "version": "1.4.0",
      "repository": {
        "Http": {
          "url": "https://crates.io/api/v1/crates/lazy_static/1.4.0/download",
          "sha256": "e2abad23fbc42b3700f2f279844dc832adb2b2eb069b2df918f455c4e18cc646"
        }
      },
      "targets": [
        {
          "Library": {
            "crate_name": "lazy_static",
            "crate_root": "src/lib.rs",
            "srcs": {
              "include": [
                "**/*.rs"
              ],
              "exclude": []
            }
          }
        }
      ],
      "library_target_name": "lazy_static",
      "common_attrs": {
        "compile_data_glob": [
          "**"
        ],
        "crate_features": [
          "spin",
          "spin_no_std"
        ],
        "deps": {
          "common": [
            {
              "id": "spin 0.5.2",
              "target": "spin"
            }
          ],
          "selects": {}
        },
        "edition": "2015",
        "version": "1.4.0"
      },
      "license": "MIT/Apache-2.0"
    },
    "linked_list_allocator 0.9.1": {
      "name": "linked_list_allocator",
      "version": "0.9.1",
      "repository": {
        "Http": {
          "url": "https://crates.io/api/v1/crates/linked_list_allocator/0.9.1/download",
          "sha256": "549ce1740e46b291953c4340adcd74c59bcf4308f4cac050fd33ba91b7168f4a"
        }
      },
      "targets": [
        {
          "Library": {
            "crate_name": "linked_list_allocator",
            "crate_root": "src/lib.rs",
            "srcs": {
              "include": [
                "**/*.rs"
              ],
              "exclude": []
            }
          }
        }
      ],
      "library_target_name": "linked_list_allocator",
      "common_attrs": {
        "compile_data_glob": [
          "**"
        ],
        "crate_features": [
          "const_mut_refs"
        ],
        "edition": "2015",
        "version": "0.9.1"
      },
      "license": "Apache-2.0/MIT"
    },
    "llvm-tools 0.1.1": {
      "name": "llvm-tools",
      "version": "0.1.1",
      "repository": {
        "Http": {
          "url": "https://crates.io/api/v1/crates/llvm-tools/0.1.1/download",
          "sha256": "955be5d0ca0465caf127165acb47964f911e2bc26073e865deb8be7189302faf"
        }
      },
      "targets": [
        {
          "Library": {
            "crate_name": "llvm_tools",
            "crate_root": "src/lib.rs",
            "srcs": {
              "include": [
                "**/*.rs"
              ],
              "exclude": []
            }
          }
        }
      ],
      "library_target_name": "llvm_tools",
      "common_attrs": {
        "compile_data_glob": [
          "**"
        ],
        "edition": "2018",
        "version": "0.1.1"
      },
      "license": "MIT/Apache-2.0"
    },
    "managed 0.8.0": {
      "name": "managed",
      "version": "0.8.0",
      "repository": {
        "Http": {
          "url": "https://crates.io/api/v1/crates/managed/0.8.0/download",
          "sha256": "0ca88d725a0a943b096803bd34e73a4437208b6077654cc4ecb2947a5f91618d"
        }
      },
      "targets": [
        {
          "Library": {
            "crate_name": "managed",
            "crate_root": "src/lib.rs",
            "srcs": {
              "include": [
                "**/*.rs"
              ],
              "exclude": []
            }
          }
        }
      ],
      "library_target_name": "managed",
      "common_attrs": {
        "compile_data_glob": [
          "**"
        ],
        "crate_features": [
          "alloc",
          "map"
        ],
        "edition": "2015",
        "version": "0.8.0"
      },
      "license": "0BSD"
    },
    "pic8259 0.10.2": {
      "name": "pic8259",
      "version": "0.10.2",
      "repository": {
        "Http": {
          "url": "https://crates.io/api/v1/crates/pic8259/0.10.2/download",
          "sha256": "24ec21f514e2e16e94649f1d041ca4a7069b512c037ac156360652a775e6229d"
        }
      },
      "targets": [
        {
          "Library": {
            "crate_name": "pic8259",
            "crate_root": "src/lib.rs",
            "srcs": {
              "include": [
                "**/*.rs"
              ],
              "exclude": []
            }
          }
        }
      ],
      "library_target_name": "pic8259",
      "common_attrs": {
        "compile_data_glob": [
          "**"
        ],
        "crate_features": [
          "default",
          "nightly"
        ],
        "deps": {
          "common": [
            {
              "id": "x86_64 0.14.9",
              "target": "x86_64"
            }
          ],
          "selects": {}
        },
        "edition": "2018",
        "version": "0.10.2"
      },
      "license": "Apache-2.0/MIT"
    },
    "raw-cpuid 10.3.0": {
      "name": "raw-cpuid",
      "version": "10.3.0",
      "repository": {
        "Http": {
          "url": "https://crates.io/api/v1/crates/raw-cpuid/10.3.0/download",
          "sha256": "738bc47119e3eeccc7e94c4a506901aea5e7b4944ecd0829cbebf4af04ceda12"
        }
      },
      "targets": [
        {
          "Library": {
            "crate_name": "raw_cpuid",
            "crate_root": "src/lib.rs",
            "srcs": {
              "include": [
                "**/*.rs"
              ],
              "exclude": []
            }
          }
        },
        {
          "Binary": {
            "crate_name": "cpuid",
            "crate_root": "src/bin/cpuid.rs",
            "srcs": {
              "include": [
                "**/*.rs"
              ],
              "exclude": []
            }
          }
        }
      ],
      "library_target_name": "raw_cpuid",
      "common_attrs": {
        "compile_data_glob": [
          "**"
        ],
        "deps": {
          "common": [
            {
              "id": "bitflags 1.3.2",
              "target": "bitflags"
            }
          ],
          "selects": {}
        },
        "edition": "2018",
        "version": "10.3.0"
      },
      "license": "MIT"
    },
    "rustversion 1.0.6": {
      "name": "rustversion",
      "version": "1.0.6",
      "repository": {
        "Http": {
          "url": "https://crates.io/api/v1/crates/rustversion/1.0.6/download",
          "sha256": "f2cc38e8fa666e2de3c4aba7edeb5ffc5246c1c2ed0e3d17e560aeeba736b23f"
        }
      },
      "targets": [
        {
          "ProcMacro": {
            "crate_name": "rustversion",
            "crate_root": "src/lib.rs",
            "srcs": {
              "include": [
                "**/*.rs"
              ],
              "exclude": []
            }
          }
        },
        {
          "BuildScript": {
            "crate_name": "build_script_build",
            "crate_root": "build/build.rs",
            "srcs": {
              "include": [
                "**/*.rs"
              ],
              "exclude": []
            }
          }
        }
      ],
      "library_target_name": "rustversion",
      "common_attrs": {
        "compile_data_glob": [
          "**"
        ],
        "deps": {
          "common": [
            {
              "id": "rustversion 1.0.6",
              "target": "build_script_build"
            }
          ],
          "selects": {}
        },
        "edition": "2018",
        "version": "1.0.6"
      },
      "build_script_attrs": {
        "data_glob": [
          "**"
        ]
      },
      "license": "MIT OR Apache-2.0"
    },
    "serde 1.0.136": {
      "name": "serde",
      "version": "1.0.136",
      "repository": {
        "Http": {
          "url": "https://crates.io/api/v1/crates/serde/1.0.136/download",
          "sha256": "ce31e24b01e1e524df96f1c2fdd054405f8d7376249a5110886fb4b658484789"
        }
      },
      "targets": [
        {
          "Library": {
            "crate_name": "serde",
            "crate_root": "src/lib.rs",
            "srcs": {
              "include": [
                "**/*.rs"
              ],
              "exclude": []
            }
          }
        },
        {
          "BuildScript": {
            "crate_name": "build_script_build",
            "crate_root": "build.rs",
            "srcs": {
              "include": [
                "**/*.rs"
              ],
              "exclude": []
            }
          }
        }
      ],
      "library_target_name": "serde",
      "common_attrs": {
        "compile_data_glob": [
          "**"
        ],
        "crate_features": [
          "default",
          "std"
        ],
        "deps": {
          "common": [
            {
              "id": "serde 1.0.136",
              "target": "build_script_build"
            }
          ],
          "selects": {}
        },
        "edition": "2015",
        "version": "1.0.136"
      },
      "build_script_attrs": {
        "data_glob": [
          "**"
        ]
      },
      "license": "MIT OR Apache-2.0"
    },
    "smoltcp 0.8.0": {
      "name": "smoltcp",
      "version": "0.8.0",
      "repository": {
        "Http": {
          "url": "https://crates.io/api/v1/crates/smoltcp/0.8.0/download",
          "sha256": "d2308a1657c8db1f5b4993bab4e620bdbe5623bd81f254cf60326767bb243237"
        }
      },
      "targets": [
        {
          "Library": {
            "crate_name": "smoltcp",
            "crate_root": "src/lib.rs",
            "srcs": {
              "include": [
                "**/*.rs"
              ],
              "exclude": []
            }
          }
        }
      ],
      "library_target_name": "smoltcp",
      "common_attrs": {
        "compile_data_glob": [
          "**"
        ],
        "crate_features": [
          "alloc",
          "async",
          "medium-ethernet",
          "proto-dhcpv4",
          "proto-ipv4",
          "socket",
          "socket-dhcpv4",
          "socket-raw",
          "socket-tcp",
          "socket-udp"
        ],
        "deps": {
          "common": [
            {
              "id": "bitflags 1.3.2",
              "target": "bitflags"
            },
            {
              "id": "byteorder 1.4.3",
              "target": "byteorder"
            },
            {
              "id": "managed 0.8.0",
              "target": "managed"
            }
          ],
          "selects": {}
        },
        "edition": "2018",
        "version": "0.8.0"
      },
      "license": "0BSD"
    },
    "spin 0.5.2": {
      "name": "spin",
      "version": "0.5.2",
      "repository": {
        "Http": {
          "url": "https://crates.io/api/v1/crates/spin/0.5.2/download",
          "sha256": "6e63cff320ae2c57904679ba7cb63280a3dc4613885beafb148ee7bf9aa9042d"
        }
      },
      "targets": [
        {
          "Library": {
            "crate_name": "spin",
            "crate_root": "src/lib.rs",
            "srcs": {
              "include": [
                "**/*.rs"
              ],
              "exclude": []
            }
          }
        }
      ],
      "library_target_name": "spin",
      "common_attrs": {
        "compile_data_glob": [
          "**"
        ],
        "edition": "2015",
        "version": "0.5.2"
      },
      "license": "MIT"
    },
    "toml 0.5.8": {
      "name": "toml",
      "version": "0.5.8",
      "repository": {
        "Http": {
          "url": "https://crates.io/api/v1/crates/toml/0.5.8/download",
          "sha256": "a31142970826733df8241ef35dc040ef98c679ab14d7c3e54d827099b3acecaa"
        }
      },
      "targets": [
        {
          "Library": {
            "crate_name": "toml",
            "crate_root": "src/lib.rs",
            "srcs": {
              "include": [
                "**/*.rs"
              ],
              "exclude": []
            }
          }
        }
      ],
      "library_target_name": "toml",
      "common_attrs": {
        "compile_data_glob": [
          "**"
        ],
        "crate_features": [
          "default"
        ],
        "deps": {
          "common": [
            {
              "id": "serde 1.0.136",
              "target": "serde"
            }
          ],
          "selects": {}
        },
        "edition": "2018",
        "version": "0.5.8"
      },
      "license": "MIT/Apache-2.0"
    },
    "uart_16550 0.2.17": {
      "name": "uart_16550",
      "version": "0.2.17",
      "repository": {
        "Http": {
          "url": "https://crates.io/api/v1/crates/uart_16550/0.2.17/download",
          "sha256": "3616395dbb38a9c39a5865b5691c21d9f8369ba876355cfef8ce39d0d4cf3281"
        }
      },
      "targets": [
        {
          "Library": {
            "crate_name": "uart_16550",
            "crate_root": "src/lib.rs",
            "srcs": {
              "include": [
                "**/*.rs"
              ],
              "exclude": []
            }
          }
        }
      ],
      "library_target_name": "uart_16550",
      "common_attrs": {
        "compile_data_glob": [
          "**"
        ],
        "crate_features": [
          "default",
          "nightly"
        ],
        "deps": {
          "common": [
            {
              "id": "bitflags 1.3.2",
              "target": "bitflags"
            }
          ],
          "selects": {
            "cfg(target_arch = \"x86_64\")": [
              {
                "id": "x86_64 0.14.9",
                "target": "x86_64"
              }
            ]
          }
        },
        "extra_deps": [
          "@crates//:x86_64"
        ],
        "edition": "2018",
        "version": "0.2.17"
      },
      "license": "MIT",
      "additive_build_file_content": "# Copyright 2022 The Firefly Authors.\n#\n# Use of this source code is governed by a BSD 3-clause\n# license that can be found in the LICENSE file.\n\n# The bootloader package is a little unusual, as we use\n# both its library crate and main binary crate, plus we\n# depend on its build.rs script.\n#\n# The library crate is a standard rust_library.\n#\n# The build.rs script  produces a couple of output files\n# we need later on (a generated rust file containing the\n# kernel's configuration, plus a modified version of the\n# kernel binary). It's not currently possible to declare\n# or use output files with a cargo_build_script. Instead,\n# we build it as a rust_binary and then use a genrule to\n# invoke it, collecting its outputs in the process.\n#\n# Sadly, the build script produces not only an output\n# file (bootloader_config.rs) but also prints important\n# information to stdout (an extra search path for the\n# linker). Running the build script as a rust_binary + genrule\n# is necessary so we can declare the output file, but a\n# cargo_build_script is necessary to capture, parse, and\n# pass on the search path to the linker. That means we\n# have to do both. It would be great to be able to use\n# just one. We can capture the path to the extra link\n# entry, but can't extract its parent directory to pass\n# to the linker.\n#\n# The binary crate is built as a rust_binary, passing in\n# the outputs from the build script. This produces the\n# bootable image in the form of an ELF executable.\n#\n# Once we have the bootable image, we use the bootimage\n# crate to turn the ELF executable into a raw executable,\n# padded to the next smallest block size (512 bytes).\n\n# We already have the bootloader library, which is a normal\n# build.\n\n# Now, the multiple steps necessary to build\n# the bootloader binary.\n#\n# First, we compile the build script.\n\nrust_binary(\n    name = \"build_script\",\n    srcs = [\"build.rs\"],\n    crate_features = [\n        \"binary\",\n        \"fixedvec\",\n        \"llvm-tools\",\n        \"map_physical_memory\",\n        \"toml\",\n        \"usize_conversions\",\n        \"x86_64\",\n        \"xmas-elf\",\n    ],\n    crate_root = \"build.rs\",\n    edition = \"2021\",\n    visibility = [\"//visibility:private\"],\n    deps = [\n        \"@crates//:llvm-tools\",\n        \"@crates//:toml\",\n    ],\n)\n\n# Invoke the build script, passing\n# in the kernel binary and its\n# Cargo.toml.\n\ngenrule(\n    name = \"package_kernel\",\n    srcs = [\n        \"@//kernel:kernel\",\n        \"@//kernel:ograC.toml\",\n        \"@rust_linux_x86_64//:rustc\",\n        \"x86_64-bootloader.json\",\n    ],\n    outs = [\n        \"bootloader_config.rs\",\n        \"libkernel_bin-kernel.a\",\n    ],\n    cmd = \"\"\"\n        export TARGET=\"$(location x86_64-bootloader.json)\"\n        export KERNEL=\"$(location @//kernel:kernel)\"\n        export KERNEL_MANIFEST=\"$(location @//kernel:ograC.toml)\"\n        export OUT_DIR=\"$$(realpath $(@D))\"\n        export PATH=\"$$(dirname $(location @rust_linux_x86_64//:rustc)):$$PATH\"\n        $(location :build_script) > /dev/null\"\"\",\n    message = \"Packaging the kernel binary\",\n    tools = [\n        \":build_script\",\n    ],\n    visibility = [\"//visibility:private\"],\n)\n\n# Build the bootloader binary using the\n# information and files generated by the\n# build script above.\n#\n# Note, we don't invoke this target directly,\n# as it needs to be built for a custom\n# target configuration. Instead, we invoke\n# bootloader_bin_transition below.\n\nrust_binary(\n    name = \"bootloader_bin\",\n    srcs = glob([\"**/*.rs\"]),\n    compile_data = [\n        \":bootloader_config.rs\",\n        \":libkernel_bin-kernel.a\",\n    ],\n    crate_features = [\n        \"binary\",\n        \"default\",\n        \"map_physical_memory\",\n    ],\n    crate_root = \"src/main.rs\",\n    data = glob(\n        [\"**\"],\n        exclude = [\n            # These can be manually added with overrides if needed.\n\n            # If you run `cargo build` in this dir, the target dir can get very big very quick.\n            \"target/**\",\n\n            # These are not vendored from the crate - we exclude them to avoid busting caches\n            # when we change how we generate BUILD files and such.\n            \"BUILD.bazel\",\n            \"WORKSPACE.bazel\",\n            \"WORKSPACE\",\n        ],\n    ),\n    edition = \"2021\",\n    linker_script = \"linker.ld\",\n    rustc_env = {\n        # This should be OUT_DIR, but while we can get the\n        # path to bootloader_config.rs, we can't get the\n        # path to its parent directory. As a result, we use\n        # bootloader.patch to change how the file is included.\n        \"BOOTLOADER_CONFIG_RS\": \"$(location :bootloader_config.rs)\",\n    },\n    rustc_flags = [\n        \"--cap-lints=allow\",\n        \"-Cpanic=abort\",\n        \"-Clink-args=-nostartfiles -static -Wl,--gc-sections -Wl,--build-id=none\",\n        \"-Ctarget-feature=+crt-static\",\n        # :bootloader_build_script adds to the linker's search path\n        # but for some reason it doesn't add to the link list, so\n        # we do that manually here.\n        \"-lstatic=kernel_bin-kernel\",\n    ],\n    tags = [\"manual\"],\n    visibility = [\"//visibility:public\"],\n    deps = [\n        \":bootloader\",\n        \":bootloader_build_script\",\n        \"@crates//:bit_field\",\n        \"@crates//:fixedvec\",\n        \"@crates//:usize_conversions\",\n        \"@crates//:x86_64\",\n        \"@crates//:xmas-elf\",\n    ],\n)\n"
    },
    "usize_conversions 0.2.0": {
      "name": "usize_conversions",
      "version": "0.2.0",
      "repository": {
        "Http": {
          "url": "https://crates.io/api/v1/crates/usize_conversions/0.2.0/download",
          "sha256": "f70329e2cbe45d6c97a5112daad40c34cd9a4e18edb5a2a18fefeb584d8d25e5"
        }
      },
      "targets": [
        {
          "Library": {
            "crate_name": "usize_conversions",
            "crate_root": "src/lib.rs",
            "srcs": {
              "include": [
                "**/*.rs"
              ],
              "exclude": []
            }
          }
        }
      ],
      "library_target_name": "usize_conversions",
      "common_attrs": {
        "compile_data_glob": [
          "**"
        ],
        "edition": "2015",
        "version": "0.2.0"
      },
      "license": "MIT/Apache-2.0"
    },
    "volatile 0.4.4": {
      "name": "volatile",
      "version": "0.4.4",
      "repository": {
        "Http": {
          "url": "https://crates.io/api/v1/crates/volatile/0.4.4/download",
          "sha256": "e4c2dbd44eb8b53973357e6e207e370f0c1059990df850aca1eca8947cf464f0"
        }
      },
      "targets": [
        {
          "Library": {
            "crate_name": "volatile",
            "crate_root": "src/lib.rs",
            "srcs": {
              "include": [
                "**/*.rs"
              ],
              "exclude": []
            }
          }
        }
      ],
      "library_target_name": "volatile",
      "common_attrs": {
        "compile_data_glob": [
          "**"
        ],
        "edition": "2015",
        "version": "0.4.4"
      },
      "license": "MIT OR Apache-2.0"
    },
    "x86_64 0.14.9": {
      "name": "x86_64",
      "version": "0.14.9",
      "repository": {
        "Http": {
          "url": "https://crates.io/api/v1/crates/x86_64/0.14.9/download",
          "sha256": "958cd5cb28e720db2f59ee9dc4235b5f82a183d079fb0e6caf43ad074cfdc66a"
        }
      },
      "targets": [
        {
          "Library": {
            "crate_name": "x86_64",
            "crate_root": "src/lib.rs",
            "srcs": {
              "include": [
                "**/*.rs"
              ],
              "exclude": []
            }
          }
        }
      ],
      "library_target_name": "x86_64",
      "common_attrs": {
        "compile_data_glob": [
          "**"
        ],
        "crate_features": [
          "abi_x86_interrupt",
          "const_fn",
          "default",
          "doc_cfg",
          "inline_asm",
          "instructions",
          "nightly",
          "step_trait"
        ],
        "deps": {
          "common": [
            {
              "id": "bit_field 0.10.1",
              "target": "bit_field"
            },
            {
              "id": "bitflags 1.3.2",
              "target": "bitflags"
            },
            {
              "id": "volatile 0.4.4",
              "target": "volatile"
            }
          ],
          "selects": {}
        },
        "edition": "2018",
        "proc_macro_deps": {
          "common": [
            {
              "id": "rustversion 1.0.6",
              "target": "rustversion"
            }
          ],
          "selects": {}
        },
        "version": "0.14.9"
      },
      "license": "MIT/Apache-2.0"
    },
    "xmas-elf 0.8.0": {
      "name": "xmas-elf",
      "version": "0.8.0",
      "repository": {
        "Http": {
          "url": "https://crates.io/api/v1/crates/xmas-elf/0.8.0/download",
          "sha256": "8d29b4d8e7beaceb4e77447ba941a7600d23d0319ab52da0461abea214832d5a"
        }
      },
      "targets": [
        {
          "Library": {
            "crate_name": "xmas_elf",
            "crate_root": "src/lib.rs",
            "srcs": {
              "include": [
                "**/*.rs"
              ],
              "exclude": []
            }
          }
        },
        {
          "Binary": {
            "crate_name": "xmas_elf",
            "crate_root": "src/bin/main.rs",
            "srcs": {
              "include": [
                "**/*.rs"
              ],
              "exclude": []
            }
          }
        }
      ],
      "library_target_name": "xmas_elf",
      "common_attrs": {
        "compile_data_glob": [
          "**"
        ],
        "deps": {
          "common": [
            {
              "id": "zero 0.1.2",
              "target": "zero"
            }
          ],
          "selects": {}
        },
        "edition": "2015",
        "version": "0.8.0"
      },
      "license": "Apache-2.0 OR MIT"
    },
    "zero 0.1.2": {
      "name": "zero",
      "version": "0.1.2",
      "repository": {
        "Http": {
          "url": "https://crates.io/api/v1/crates/zero/0.1.2/download",
          "sha256": "5f1bc8a6b2005884962297587045002d8cfb8dcec9db332f4ca216ddc5de82c5"
        }
      },
      "targets": [
        {
          "Library": {
            "crate_name": "zero",
            "crate_root": "src/lib.rs",
            "srcs": {
              "include": [
                "**/*.rs"
              ],
              "exclude": []
            }
          }
        }
      ],
      "library_target_name": "zero",
      "common_attrs": {
        "compile_data_glob": [
          "**"
        ],
        "edition": "2015",
        "version": "0.1.2"
      },
      "license": "Apache-2.0/MIT"
    }
  },
  "binary_crates": [
    "bootloader 0.9.22",
    "raw-cpuid 10.3.0",
    "xmas-elf 0.8.0"
  ],
  "workspace_members": {
    "direct-cargo-bazel-deps 0.0.1": ""
  },
  "conditions": {
    "cfg(target_arch = \"x86_64\")": [
      "x86_64-unknown-linux-gnu"
    ]
  }
}
