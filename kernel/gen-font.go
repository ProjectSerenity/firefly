// +build ignore

// Generate font.h from the glyph data below.

package main

import (
	"bytes"
	"encoding/binary"
	"fmt"
	"log"
	"os"
)

func init() {
	log.SetFlags(0)
}

const outName = "font.h"

func main() {
	// Test the data is valid.
	for r, v := range fontData {
		if r > 0xff {
			log.Fatalf("Invalid rune in data: %c (%d)", r, r)
		}

		if len(v) != 8*8 {
			log.Fatalf("Invalid font entry for %c: got %d bytes, want %d", r, len(v), 8*8)
		}
	}

	// Prepare the encoded form.
	var buf bytes.Buffer
	fmt.Fprintf(&buf, "#pragma once\n#ifndef FONT_H\n#define FONT_H\n\n")
	fmt.Fprintf(&buf, "// Code generated by `go run generate-font.go`. DO NOT EDIT.\n\n")
	fmt.Fprintf(&buf, "static const uint64 font_Data[256] = {\n")
	for i := rune(0); i < 255; i++ {
		r, ok := fontData[i]
		if !ok {
			r = fontData[-1]
		}

		// Encode each dot/space as a 1/0,
		// so each row of data becomes a single
		// byte and each character becomes a
		// uint64.
		var raw [8]byte
		for i := range raw {
			var b byte
			for j := 0; j < 8; j++ {
				if r[i*8+j] == '.' {
					b |= 1 << (7 - j)
				}
			}

			raw[i] = b
		}

		full := binary.BigEndian.Uint64(raw[:])

		char := i
		if i < 32 || 126 < i {
			char = '.'
		}

		fmt.Fprintf(&buf, "\t0x%016x, // %q\n", full, char)
	}
	fmt.Fprintf(&buf, "};\n\n#endif // FONT_H\n")

	f, err := os.Create(outName)
	if err != nil {
		log.Fatalf("failed to create %s: %v", outName, err)
	}

	_, err = f.Write(buf.Bytes())
	if err != nil {
		log.Fatalf("failed to write %s: %v", outName, err)
	}

	err = f.Close()
	if err != nil {
		log.Fatalf("failed to close %s: %v", outName, err)
	}
}

var fontData = map[rune]string{
	' ': "" +
		"        " +
		"        " +
		"        " +
		"        " +
		"        " +
		"        " +
		"        " +
		"        ",
	'!': "" +
		"    .   " +
		"    .   " +
		"    .   " +
		"    .   " +
		"    .   " +
		"        " +
		"    .   " +
		"        ",
	'"': "" +
		"   . .  " +
		"   . .  " +
		"   . .  " +
		"        " +
		"        " +
		"        " +
		"        " +
		"        ",
	'#': "" +
		"        " +
		"   . .  " +
		"  ..... " +
		"   . .  " +
		"  ..... " +
		"   . .  " +
		"        " +
		"        ",
	'$': "" +
		"    .   " +
		"   .... " +
		"  . .   " +
		"   ...  " +
		"    . . " +
		"  ....  " +
		"    .   " +
		"        ",
	'%': "" +
		"  ..    " +
		"  ..  . " +
		"     .  " +
		"    .   " +
		"   .    " +
		"  .  .. " +
		"     .. " +
		"        ",
	'&': "" +
		"   .    " +
		"  . .   " +
		"  . .   " +
		"   .    " +
		"  . . . " +
		"  .  .  " +
		"   .. . " +
		"        ",
	'\'': "" +
		"    .   " +
		"    .   " +
		"   .    " +
		"        " +
		"        " +
		"        " +
		"        " +
		"        ",
	'(': "" +
		"     .  " +
		"    .   " +
		"   .    " +
		"   .    " +
		"   .    " +
		"    .   " +
		"     .  " +
		"        ",
	')': "" +
		"   .    " +
		"    .   " +
		"     .  " +
		"     .  " +
		"     .  " +
		"    .   " +
		"   .    " +
		"        ",
	'*': "" +
		"        " +
		"    .   " +
		"  . . . " +
		"   ...  " +
		"  . . . " +
		"    .   " +
		"        " +
		"        ",
	'+': "" +
		"        " +
		"    .   " +
		"    .   " +
		"  ..... " +
		"    .   " +
		"    .   " +
		"        " +
		"        ",
	',': "" +
		"        " +
		"        " +
		"        " +
		"        " +
		"    .   " +
		"    .   " +
		"   .    " +
		"        ",
	'-': "" +
		"        " +
		"        " +
		"        " +
		"  ..... " +
		"        " +
		"        " +
		"        " +
		"        ",
	'.': "" +
		"        " +
		"        " +
		"        " +
		"        " +
		"        " +
		"        " +
		"    .   " +
		"        ",
	'/': "" +
		"     .  " +
		"     .  " +
		"    .   " +
		"    .   " +
		"    .   " +
		"   .    " +
		"   .    " +
		"        ",
	'0': "" +
		"   ...  " +
		"  .   . " +
		"  .   . " +
		"  . . . " +
		"  .   . " +
		"  .   . " +
		"   ...  " +
		"        ",
	'1': "" +
		"     .  " +
		"    ..  " +
		"   . .  " +
		"     .  " +
		"     .  " +
		"     .  " +
		"     .  " +
		"        ",
	'2': "" +
		"   ...  " +
		"  .   . " +
		"      . " +
		"    ..  " +
		"   .    " +
		"  .     " +
		"  ..... " +
		"        ",
	'3': "" +
		"  ..... " +
		"      . " +
		"     .  " +
		"    ..  " +
		"      . " +
		"  .   . " +
		"   ...  " +
		"        ",
	'4': "" +
		"     .  " +
		"    ..  " +
		"   . .  " +
		"  .  .  " +
		"  ..... " +
		"     .  " +
		"     .  " +
		"        ",
	'5': "" +
		"  ..... " +
		"  .     " +
		"  ....  " +
		"      . " +
		"      . " +
		"  .   . " +
		"   ...  " +
		"        ",
	'6': "" +
		"    ..  " +
		"   .    " +
		"  .     " +
		"  ....  " +
		"  .   . " +
		"  .   . " +
		"   ...  " +
		"        ",
	'7': "" +
		"  ..... " +
		"      . " +
		"     .  " +
		"    .   " +
		"    .   " +
		"   .    " +
		"   .    " +
		"        ",
	'8': "" +
		"   ...  " +
		"  .   . " +
		"  .   . " +
		"   ...  " +
		"  .   . " +
		"  .   . " +
		"   ...  " +
		"        ",
	'9': "" +
		"   ...  " +
		"  .   . " +
		"  .   . " +
		"   .... " +
		"      . " +
		"     .  " +
		"   ..   " +
		"        ",
	':': "" +
		"        " +
		"        " +
		"    .   " +
		"        " +
		"        " +
		"    .   " +
		"        " +
		"        ",
	';': "" +
		"        " +
		"        " +
		"    .   " +
		"        " +
		"        " +
		"    .   " +
		"   .    " +
		"        ",
	'<': "" +
		"        " +
		"     .  " +
		"    .   " +
		"   .    " +
		"    .   " +
		"     .  " +
		"        " +
		"        ",
	'=': "" +
		"        " +
		"        " +
		"  ..... " +
		"        " +
		"  ..... " +
		"        " +
		"        " +
		"        ",
	'>': "" +
		"        " +
		"   .    " +
		"    .   " +
		"     .  " +
		"    .   " +
		"   .    " +
		"        " +
		"        ",
	'?': "" +
		"   ...  " +
		"  .   . " +
		"      . " +
		"    ..  " +
		"    .   " +
		"        " +
		"    .   " +
		"        ",
	'@': "" +
		"   ...  " +
		"  .   . " +
		"  . . . " +
		"  . ... " +
		"  . ..  " +
		"  .     " +
		"   .... " +
		"        ",
	'A': "" +
		"    .   " +
		"    .   " +
		"   . .  " +
		"   . .  " +
		"  ..... " +
		"  .   . " +
		"  .   . " +
		"        ",
	'B': "" +
		"  ....  " +
		"   .  . " +
		"   .  . " +
		"   ...  " +
		"   .  . " +
		"   .  . " +
		"  ....  " +
		"        ",
	'C': "" +
		"   ...  " +
		"  .   . " +
		"  .     " +
		"  .     " +
		"  .     " +
		"  .   . " +
		"   ...  " +
		"        ",
	'D': "" +
		"  ....  " +
		"   .  . " +
		"   .  . " +
		"   .  . " +
		"   .  . " +
		"   .  . " +
		"  ....  " +
		"        ",
	'E': "" +
		"  ..... " +
		"  .     " +
		"  .     " +
		"  ....  " +
		"  .     " +
		"  .     " +
		"  ..... " +
		"        ",
	'F': "" +
		"  ..... " +
		"  .     " +
		"  .     " +
		"  ....  " +
		"  .     " +
		"  .     " +
		"  .     " +
		"        ",
	'G': "" +
		"   ...  " +
		"  .   . " +
		"  .     " +
		"  .  .. " +
		"  .   . " +
		"  .   . " +
		"   ...  " +
		"        ",
	'H': "" +
		"  .   . " +
		"  .   . " +
		"  .   . " +
		"  ..... " +
		"  .   . " +
		"  .   . " +
		"  .   . " +
		"        ",
	'I': "" +
		"   ...  " +
		"    .   " +
		"    .   " +
		"    .   " +
		"    .   " +
		"    .   " +
		"   ...  " +
		"        ",
	'J': "" +
		"      . " +
		"      . " +
		"      . " +
		"      . " +
		"      . " +
		"  .   . " +
		"   ...  " +
		"        ",
	'K': "" +
		"  .   . " +
		"  .  .  " +
		"  . .   " +
		"  ..    " +
		"  . .   " +
		"  .  .  " +
		"  .   . " +
		"        ",
	'L': "" +
		"  .     " +
		"  .     " +
		"  .     " +
		"  .     " +
		"  .     " +
		"  .     " +
		"  ..... " +
		"        ",
	'M': "" +
		"  .   . " +
		"  .. .. " +
		"  .. .. " +
		"  . . . " +
		"  . . . " +
		"  .   . " +
		"  .   . " +
		"        ",
	'N': "" +
		"  .   . " +
		"  ..  . " +
		"  ..  . " +
		"  . . . " +
		"  .  .. " +
		"  .  .. " +
		"  .   . " +
		"        ",
	'O': "" +
		"   ...  " +
		"  .   . " +
		"  .   . " +
		"  .   . " +
		"  .   . " +
		"  .   . " +
		"   ...  " +
		"        ",
	'P': "" +
		"  ....  " +
		"  .   . " +
		"  .   . " +
		"  ....  " +
		"  .     " +
		"  .     " +
		"  .     " +
		"        ",
	'Q': "" +
		"   ...  " +
		"  .   . " +
		"  .   . " +
		"  .   . " +
		"  . . . " +
		"  .  .  " +
		"   .. . " +
		"        ",
	'R': "" +
		"  ....  " +
		"  .   . " +
		"  .   . " +
		"  ....  " +
		"  . .   " +
		"  .  .  " +
		"  .   . " +
		"        ",
	'S': "" +
		"   ...  " +
		"  .   . " +
		"  .     " +
		"   ...  " +
		"      . " +
		"  .   . " +
		"   ...  " +
		"        ",
	'T': "" +
		"  ..... " +
		"    .   " +
		"    .   " +
		"    .   " +
		"    .   " +
		"    .   " +
		"    .   " +
		"        ",
	'U': "" +
		"  .   . " +
		"  .   . " +
		"  .   . " +
		"  .   . " +
		"  .   . " +
		"  .   . " +
		"   ...  " +
		"        ",
	'V': "" +
		"  .   . " +
		"  .   . " +
		"  .   . " +
		"   . .  " +
		"   . .  " +
		"    .   " +
		"    .   " +
		"        ",
	'W': "" +
		"  .   . " +
		"  .   . " +
		"  . . . " +
		"  . . . " +
		"  . . . " +
		"   . .  " +
		"   . .  " +
		"        ",
	'X': "" +
		"  .   . " +
		"  .   . " +
		"   . .  " +
		"    .   " +
		"   . .  " +
		"  .   . " +
		"  .   . " +
		"        ",
	'Y': "" +
		"  .   . " +
		"  .   . " +
		"   . .  " +
		"    .   " +
		"    .   " +
		"    .   " +
		"    .   " +
		"        ",
	'Z': "" +
		"  ..... " +
		"      . " +
		"     .  " +
		"    .   " +
		"   .    " +
		"  .     " +
		"  ..... " +
		"        ",
	'[': "" +
		"   ...  " +
		"   .    " +
		"   .    " +
		"   .    " +
		"   .    " +
		"   .    " +
		"   ...  " +
		"        ",
	'\\': "" +
		"   .    " +
		"   .    " +
		"    .   " +
		"    .   " +
		"    .   " +
		"     .  " +
		"     .  " +
		"        ",
	']': "" +
		"   ...  " +
		"     .  " +
		"     .  " +
		"     .  " +
		"     .  " +
		"     .  " +
		"   ...  " +
		"        ",
	'^': "" +
		"    .   " +
		"   . .  " +
		"  .   . " +
		"        " +
		"        " +
		"        " +
		"        " +
		"        ",
	'_': "" +
		"        " +
		"        " +
		"        " +
		"        " +
		"        " +
		"        " +
		"  ..... " +
		"        ",
	'`': "" +
		"    .   " +
		"    .   " +
		"     .  " +
		"        " +
		"        " +
		"        " +
		"        " +
		"        ",
	'a': "" +
		"        " +
		"        " +
		"   ...  " +
		"      . " +
		"   .... " +
		"  .   . " +
		"   .... " +
		"        ",
	'b': "" +
		"  .     " +
		"  .     " +
		"  ....  " +
		"  .   . " +
		"  .   . " +
		"  .   . " +
		"  ....  " +
		"        ",
	'c': "" +
		"        " +
		"        " +
		"   .... " +
		"  .     " +
		"  .     " +
		"  .     " +
		"   .... " +
		"        ",
	'd': "" +
		"      . " +
		"      . " +
		"   .... " +
		"  .   . " +
		"  .   . " +
		"  .   . " +
		"   .... " +
		"        ",
	'e': "" +
		"        " +
		"        " +
		"   ...  " +
		"  .   . " +
		"  ..... " +
		"  .     " +
		"   .... " +
		"        ",
	'f': "" +
		"    ..  " +
		"   .  . " +
		"   .    " +
		"  ....  " +
		"   .    " +
		"   .    " +
		"   .    " +
		"        ",
	'g': "" +
		"        " +
		"        " +
		"   .... " +
		"  .   . " +
		"  .   . " +
		"   .... " +
		"      . " +
		"   ...  ",
	'h': "" +
		"  .     " +
		"  .     " +
		"  . ..  " +
		"  ..  . " +
		"  .   . " +
		"  .   . " +
		"  .   . " +
		"        ",
	'i': "" +
		"    .   " +
		"        " +
		"   ..   " +
		"    .   " +
		"    .   " +
		"    .   " +
		"   ...  " +
		"        ",
	'j': "" +
		"     .  " +
		"        " +
		"    ..  " +
		"     .  " +
		"     .  " +
		"     .  " +
		"  .  .  " +
		"   ..   ",
	'k': "" +
		"  .     " +
		"  .     " +
		"  .  .  " +
		"  . .   " +
		"  ...   " +
		"  .  .  " +
		"  .   . " +
		"        ",
	'l': "" +
		"   ..   " +
		"    .   " +
		"    .   " +
		"    .   " +
		"    .   " +
		"    .   " +
		"   ...  " +
		"        ",
	'm': "" +
		"        " +
		"        " +
		"  .. .  " +
		"  . . . " +
		"  . . . " +
		"  . . . " +
		"  . . . " +
		"        ",
	'n': "" +
		"        " +
		"        " +
		"  . ..  " +
		"  ..  . " +
		"  .   . " +
		"  .   . " +
		"  .   . " +
		"        ",
	'o': "" +
		"        " +
		"        " +
		"   ...  " +
		"  .   . " +
		"  .   . " +
		"  .   . " +
		"   ...  " +
		"        ",
	'p': "" +
		"        " +
		"        " +
		"  ....  " +
		"  .   . " +
		"  .   . " +
		"  ....  " +
		"  .     " +
		"  .     ",
	'q': "" +
		"        " +
		"        " +
		"   .... " +
		"  .   . " +
		"  .   . " +
		"   .... " +
		"      . " +
		"      . ",
	'r': "" +
		"        " +
		"        " +
		"  . ... " +
		"  ..    " +
		"  .     " +
		"  .     " +
		"  .     " +
		"        ",
	's': "" +
		"        " +
		"        " +
		"   .... " +
		"  .     " +
		"   ...  " +
		"      . " +
		"  ....  " +
		"        ",
	't': "" +
		"   .    " +
		"   .    " +
		"  ....  " +
		"   .    " +
		"   .    " +
		"   .  . " +
		"    ..  " +
		"        ",
	'u': "" +
		"        " +
		"        " +
		"  .   . " +
		"  .   . " +
		"  .   . " +
		"  .  .. " +
		"   .. . " +
		"        ",
	'v': "" +
		"        " +
		"        " +
		"  .   . " +
		"  .   . " +
		"   . .  " +
		"   . .  " +
		"    .   " +
		"        ",
	'w': "" +
		"        " +
		"        " +
		"  .   . " +
		"  . . . " +
		"  . . . " +
		"   . .  " +
		"   . .  " +
		"        ",
	'x': "" +
		"        " +
		"        " +
		"  .   . " +
		"   . .  " +
		"    .   " +
		"   . .  " +
		"  .   . " +
		"        ",
	'y': "" +
		"        " +
		"        " +
		"  .   . " +
		"  .   . " +
		"   . .  " +
		"   . .  " +
		"    .   " +
		"  ..    ",
	'z': "" +
		"        " +
		"        " +
		"  ..... " +
		"     .  " +
		"    .   " +
		"   .    " +
		"  ..... " +
		"        ",
	'{': "" +
		"     .. " +
		"    .   " +
		"    .   " +
		"  ..    " +
		"    .   " +
		"    .   " +
		"     .. " +
		"        ",
	'|': "" +
		"    .   " +
		"    .   " +
		"    .   " +
		"    .   " +
		"    .   " +
		"    .   " +
		"    .   " +
		"        ",
	'}': "" +
		"  ..    " +
		"    .   " +
		"    .   " +
		"     .. " +
		"    .   " +
		"    .   " +
		"  ..    " +
		"        ",
	'~': "" +
		"        " +
		"        " +
		"   .. . " +
		"  . ..  " +
		"        " +
		"        " +
		"        " +
		"        ",
	'£': "" +
		"    .   " +
		"   . .  " +
		"   .    " +
		"  ...   " +
		"   .    " +
		"   .  . " +
		"  . ..  " +
		"        ",
	-1: "" +
		"  ..... " +
		"  . . . " +
		"  .. .. " +
		"  . . . " +
		"  .. .. " +
		"  . . . " +
		"  ..... " +
		"        ",
}
